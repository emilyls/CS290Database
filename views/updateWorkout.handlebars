<form action="/" method="POST">
  <fieldset>
    <legend>Edit Workout</legend>
    <input type="hidden" name="id" id="id" value="{{this.id}}">

    <label for="name" id="exercise">Exercise Name:</label>
    <input type="text" name="name" id="name" value="{{this.name}}">
    
    <label for="reps">Repetitions:</label>
    <input type="number" name="reps" id="reps" value="{{this.reps}}"> 

    <label for="weight">Weight:</label>
    <input type="number" name="weight" id="weight" value="{{this.weight}}"> 

    <label for="date">Date:</label>
    <input type="text" name="date" id="date" value="{{this.date}}">

    <label for="lbs">Pounds <span class="note">(uncheck for Kilos)</span>:</label>
    <input type="checkbox" name="lbs" id="lbs" value="{{this.lbs}}">  

    <input type="submit" id="Update" name = "Update" value="Update">
  </fieldset>
</form>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function bindButton() {
  document.getElementById('Update').addEventListener('click', function(event) {
    var request = new XMLHttpRequest();
    var payload = {id:null, name:null, reps:null, weight:null, date:null, lbs:null};
    payload.id = document.getElementById('id').value;
    payload.name = document.getElementById('name').value;
    payload.reps = document.getElementById('reps').value;
    payload.weight = document.getElementById('weight').value;
    payload.date = document.getElementById('date').value;
    payload.lbs = document.getElementById('lbs').value;

    request.onreadystatechange = function() {
      if(request.readyState == 4 && request.status == 200) {
        var response = JSON.parse(request.responseText);
        var newPage = new XMLHttpRequest();
        newpage.open('GET', '/newWorkout', true);
        request.send(null);
      }
      
    }
    request.open('Post', '/', true);
    request.setRequestHeader('Content-Type', 'application/json');
    request.send(JSON.stringify(payload));
    event.preventDefault();
  });
}); 
</script>

